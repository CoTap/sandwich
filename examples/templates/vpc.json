{
  "AWSTemplateFormatVersion" : "2010-09-09",

  "Description" : "This template is used to create a VPC as well as an Internet Gateway.",

  "Resources" : {

    "VPC" : {
      "Type" : "AWS::EC2::VPC",
      "Properties" : {
        "CidrBlock" : "10.0.0.0/16",
        "Tags" : [ {"Key" : "Application", "Value" : { "Ref" : "AWS::StackId" } } ]
      }
    },

    "InternetGateway" : {
      "Type" : "AWS::EC2::InternetGateway",
      "Properties" : {
        "Tags" : [ { "Key" : "Application", "Value" : { "Ref" : "AWS::StackId"} } ]
      }
    },

    "AttachGateway" : {
      "Type" : "AWS::EC2::VPCGatewayAttachment",
      "Properties" : {
        "VpcId" : { "Ref" : "VPC" },
        "InternetGatewayId" : { "Ref" : "InternetGateway" }
      }
    }

  },

  "Outputs" : {

    "VpcId" : {
      "Description" : "VpcId of the VPC",
      "Value" : { "Ref" : "VPC" }
    },

    "InternetGateway" : {
      "Description" : "Internet Gateway",
      "Value" : { "Ref": "InternetGateway" }
    }
  }
}
